---
- hosts: webservers
  become: true
  tasks:
  
  - name: Install packages
    yum:
      name: "{{item}}"
      state: present
    with_items:
      - java-1.8.0
      - tomcat-webapps
      - tomcat-admin-webapps

  - name: copy tomcat user file to tomcat server
    copy:
      src: tomcat-users.xml
      dest: /etc/tomcat/tomcat-user.xml

  - name: Deploy Artifacts to tomcat server
    get_url: 
      url: http://35.87.56.9:8081/repository/GAME/Env/Env/1.2/Env-1.2.war
      url username: admin
      password: 1234
      dest: /usr/share/tomcat/webapps
  
  - name: restart tomcat service
    service:
      name: tomcat
      state: restarted
      
      
      
      

